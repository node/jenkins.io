---
layout: documentation
title: Creating your first Pipeline
section: doc
---

:toc:
:imagesdir: /doc/book/resources

=== 什么是Jenkins Pipeline？

Jenkins Pipeline（或者简写为 “Piepline”）是一系列插件，支持通过Jenkins实现和集成 _持续交付流水线_ 。

一个 _持续交付流水线_ 就是一个软件从版本控制到用户或消费者手中的自动化流程。

Jenkins Pipeline提供了一个扩展的工具集，把简单到复杂的交付流程建模“为代码”。一个Jenkins Pipeline的定义通常写到一个文本文件（叫做一个 `Jenkinsfile`），并一次检出到一个项目的源码控制仓库中。footnoteref:[scm, https://en.wikipedia.org/wiki/Source_control_management[Source Control Management]]

想要了解更多Pipeline的信息，以及`Jenkinsfile`是什么，请分别参考用户手册的 link:/doc/book/pipeline[Pipeline] 和 link:/doc/book/pipeline/jenkinsfile[Using a Jenkinsfile] 部分。

要快速开始使用Pipeline：

. 拷贝 <<examples, 下列示例>> 之一到自己的仓库，并命名为 `Jenkinsfile`
. 在Jenkins中点击菜单 *New Item* image:pipeline/new-item-selection.png["点击Jenkins首页的 *New Item* ", role=center]
. 为新项目设置一个名称（比如 “My Pipeline”）并选择 *Multibranch Pipeline* 。
. 点击 *Add Source* 按钮，选择想使用的仓库类型并填入详细信息。
. 点击  *Save* 按钮就可以看到第一个Pipeline运行起来了！

为了能在你的项目里运行，可能需要修改示例之一的 `Jenkinsfile`。试试修改 `sh` 命令执行计划将在本机运行的相同命令。

在设置好Pipeline以后，Jenkins将自动检测代码仓库中是否有新的分支或提交请求，一旦有就会开始为其执行Pipeline。

**link:../running-multiple-steps[继续 "执行多个步骤"]**

[[examples]]
== 快速入门示例

下面是一些不同语言的简单Pipeline示例，很容易复制粘贴：

=== Java

[pipeline]
----
// Declarative //
pipeline {
    agent { docker 'maven:3.3.3' }
    stages {
        stage('build') {
            steps {
                sh 'mvn --version'
            }
        }
    }
}
// Scripted //
/* Requires the Docker Pipeline plugin */
node('docker') {
    checkout scm
    stage('Build') {
        docker.image('maven:3.3.3').inside {
            sh 'mvn --version'
        }
    }
}
----

=== Node.js / JavaScript

[pipeline]
----
// Declarative //
pipeline {
    agent { docker 'node:6.3' }
    stages {
        stage('build') {
            steps {
                sh 'npm --version'
            }
        }
    }
}
// Scripted //
/* Requires the Docker Pipeline plugin */
node('docker') {
    checkout scm
    stage('Build') {
        docker.image('node:6.3').inside {
            sh 'npm --version'
        }
    }
}
----

=== Ruby

[pipeline]
----
// Declarative //
pipeline {
    agent { docker 'ruby' }
    stages {
        stage('build') {
            steps {
                sh 'ruby --version'
            }
        }
    }
}
// Scripted //
/* Requires the Docker Pipeline plugin */
node('docker') {
    checkout scm
    stage('Build') {
        docker.image('ruby').inside {
            sh 'ruby --version'
        }
    }
}
----

=== Python

[pipeline]
----
// Declarative //
pipeline {
    agent { docker 'python:3.5.1' }
    stages {
        stage('build') {
            steps {
                sh 'python --version'
            }
        }
    }
}
// Scripted //
/* Requires the Docker Pipeline plugin */
node('docker') {
    checkout scm
    stage('Build') {
        docker.image('python:3.5.1').inside {
            sh 'python --version'
        }
    }
}
----

=== PHP

[pipeline]
----
// Declarative //
pipeline {
    agent { docker 'php' }
    stages {
        stage('build') {
            steps {
                sh 'php --version'
            }
        }
    }
}
// Scripted //
/* Requires the Docker Pipeline plugin */
node('docker') {
    checkout scm
    stage('Build') {
        docker.image('php').inside {
            sh 'php --version'
        }
    }
}
----

---
**link:../running-multiple-steps[继续 "执行多个步骤"]**

include::doc/_feedback-footer.adoc[]
